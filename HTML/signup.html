<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../CSS/style.css">
    <link rel="stylesheet" href="../CSS/in.css">
    <link rel="stylesheet" href="../CSS/footer.css">
    <!-- vue -->
    <script src="https://unpkg.com/vue@next"></script>
    <script src="../js/actions.js" defer></script>
    <title>Sign Up</title>
</head>

<body>
    <form class="form-signin" action="">
        <!-- Form header -->
        <div class="inHeadDiv">
            <div class="display-3 inHead">Sign up</div>
            <h4 class="inSubHead">to post internship reviews.</h4>
        </div>

        <div class="inBodyDiv">
            <div id="signupName" class="form-row signupRow">
                <div class="col col-6">
                    <label class="sr-only" for="signupFirstName">First name</label>
                    <input id="signupFirstName" class="form-control signupField" type="text" placeholder="First name"
                        required="" autofocus="">
                </div>

                <div class="col col-3">
                    <label class="sr-only " for="signupLastName">Last name</label>
                    <input id="signupLastName" class="form-control signupField" type="text" placeholder="Last name"
                        required="" autofocus="">

                </div>

                <div class="col col-3">
                    <label class="sr-only " for="signupGender">Gender</label>

                    <div id="signupGender" class="dropdown">
                        <button class="btn btn-light dropdown-toggle" type="button" id="signupGenderBtn"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Gender
                        </button>
                        <div class="dropdown-menu" aria-labelledby="signupGenderBtn">
                            <a class="dropdown-item" href="#">Male &#128102;</a>
                            <a class="dropdown-item" href="#">Female &#128103;</a>
                            <a class="dropdown-item" href="#">Other ðŸ˜º</a>
                        </div>
                    </div>
                </div>

            </div>

            <div id="signupSchool" class="form-row signupRow">
                <div class="col">
                    <label class="sr-only " for="signupSchoolName">School name</label>
                    <input id="signupSchoolName" class="form-control signupField" type="text" placeholder="School"
                        required="" autofocus="">
                </div>
                <div class="col">
                    <label class="sr-only " for="schoolEmail">School Email</label>
                    <input id="schoolEmail" class="form-control signupField" type="email" placeholder="School email"
                        required="" autofocus="">

                </div>
            </div>

            <div id="signupPw1" class="form-row signupRow">
                <div class="col">
                    <label class="sr-only" for="signupPw1Input">Password</label>
                    <input id="signupPw1Input" class="form-control signupField" type="password" placeholder="Password"
                        required="" autofocus="" oninput="checkPasswordRequirement()">
                    <i id="signupPw1Toggle" class="bi bi-eye-fill pwToggle"
                        onclick="pwToggle(signupPw1Input,signupPw1Toggle)"></i>
                </div>
            </div>
            <!-- Remove password-desc-required class when requirement is met  & add when NOT met -->
            <div class="passwordrequirements mb-2">
                <div id="password-req-length" class="password-desc-required"><img src="../IMG/tick_success.svg"
                        class="password-desc">MUST
                    contain eight (8) characters or more</div>
                <div id="password-req-ucase" class="password-desc-required"><img src="../IMG/tick_success.svg"
                        class="password-desc">Uppercase alphabet characters (A-Z)</div>
                <div id="password-req-lcase" class="password-desc-required"><img src="../IMG/tick_success.svg"
                        class="password-desc">Lowercase
                    alphabet characters (a-z)</div>
                <div id="password-req-numerals" class="password-desc-required"><img src="../IMG/tick_success.svg"
                        class="password-desc">Arabic numerals (0-9)</div>
                <div id="password-req-nonalpha" class="password-desc-required"><img src="../IMG/tick_success.svg"
                        class="password-desc">Non-alphanumeric characters (for example: ~`!@#$%^%&amp;*-+?)</div>
                <div id="password-req-displayname" class="password-desc-required"><img src="../IMG/tick_success.svg"
                        class="password-desc">Password cannot contain part of (or full) displayed name in Profile ()
                </div>
                <!-- /***************************************************************************************
            *    CITING
            *    Author: SMU
            *    Availability: https://live.smu.edu.sg/Account/ChangePassword
            ***************************************************************************************/ -->
            </div>

            <div id="signupPw2" class="form-row signupRow">
                <div class="col">
                    <label class="sr-only " for="signupPw2Input">Confirm password</label>
                    <input id="signupPw2Input" class="form-control signupField" type="password"
                        placeholder="Confirm password" oninput="isPasswordMatch()" required="" autofocus="">
                    <i id="signupPw2Toggle" class="bi bi-eye-fill pwToggle"
                        onclick="pwToggle(signupPw2Input,signupPw2Toggle)"></i>
                </div>
            </div>
            <!-- Remove password-desc-required class when requirement is met & the reverse -->
            <div id="confirm-password-same" class="password-desc-required mb-4"><img src="../IMG/tick_success.svg"
                    class="password-desc">New Password and Confirm New Password match</div>

            <!-- Extras -->
            <div class="form-row signupBodyExtras">
                <!-- Mailing list -->
                <div class="col checkbox mb-3 loginBodyExtra">
                    <input id="loginMailingCheck" type="checkbox" value="rememberCheck">
                    <label id="loginMailingLabel" for="loginMailingCheck">I'd like to receive emails on new reviews and
                        companies</label>
                </div>
            </div>

            <!-- Submit -->
            <div class="form-row">
                <button id="signupBtn" class="btn btn-primary d-block" type="submit">Sign up</button>
                <p id="signupDisclaimer">
                    <small>By signing up, you agree to our <strong>Terms</strong>, <strong>Data Policy</strong> and
                        <strong>Cookies Policy</strong>.</small>
                </p>

            </div>
        </div>
    </form>

    <p id="signupToLogin">Already have an account? <a href="./login.html">Log in</a></p>



    <div class="footerComp">
        <intern-footer home = "../index.html" abt = "about.html" career="career.html" help= "help.html"  feedback="feedback.html" @gotohome="goHome"></intern-footer>
    </div>



    <!-- jQuery first, Popper.js, Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
        </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
        </script>


    <!-- Changing between password input types-->
    <script>
        function pwToggle(pwInput, pwToggleBtn) {
            if (pwInput.type === "password") {
                pwInput.type = "text";
                $(pwToggleBtn).toggleClass("bi-eye-fill bi-eye-slash-fill");
            } else {
                pwInput.type = "password";
                $(pwToggleBtn).toggleClass("bi-eye-slash-fill bi-eye-fill");
            }
        }

        function checkPasswordRequirement(inputField) {
            let fName = document.getElementById("signupFirstName").value
            let lName = document.getElementById("signupLastName").value
            let userPWInput = document.getElementById("signupPw1Input").value
            let criteriaLength = document.getElementById("password-req-length")
            let criteriaUC = document.getElementById("password-req-ucase")
            let criteriaLC = document.getElementById("password-req-lcase")
            let criteriaNum = document.getElementById("password-req-numerals")
            let criteriaNonAlpha = document.getElementById("password-req-nonalpha")
            let criteriaNoProfileName = document.getElementById("password-req-displayname")


            if (userPWInput.length >= 8) {
                criteriaLength.classList.remove("password-desc-required");

            } else {
                criteriaLength.classList.add("password-desc-required")
            }

            if (hasUpperC(userPWInput)) {
                criteriaUC.classList.remove("password-desc-required");
            } else {
                criteriaUC.classList.add("password-desc-required");
            }

            if (hasLowerC(userPWInput)) {
                criteriaLC.classList.remove("password-desc-required");
            } else {
                criteriaLC.classList.add("password-desc-required");
            }


            if (hasNum(userPWInput)) {
                criteriaNum.classList.remove("password-desc-required");
            } else {
                criteriaNum.classList.add("password-desc-required");
            }


            if (hasNonAlpha(userPWInput)) {
                criteriaNonAlpha.classList.remove("password-desc-required");
            } else {
                criteriaNonAlpha.classList.add("password-desc-required");
            }

            if (hasProfileName(userPWInput, fName + '.' + lName)) {
                criteriaNoProfileName.classList.add("password-desc-required");
            } else {
                criteriaNoProfileName.classList.remove("password-desc-required");
            }


        }

        function hasLowerC(input) {
            console.log(input);
            for (let string of input) {
                if ((string === string.toLowerCase()) && isNaN(string)) {
                    return true;
                }
            }
            return false;

        }

        function hasUpperC(input) {
            for (let string of input) {
                if ((string === string.toUpperCase()) && isNaN(string)) {
                    console.log(string);
                    return true;

                }
            }
            return false;
        }

        function hasNum(input) {
            for (let str of input) {
                if (isNaN(str) === false) {
                    return true;
                }
            }
            return false;
        }

        function hasNonAlpha(input) {
            let nonAlphaList = ["~", "`", "!", "@", "#", "$", "%", "^", "%", "&", "*", "-", "+", "?"]
            for (let nonAlpha of nonAlphaList) {
                if (input.indexOf(nonAlpha) !== -1) {
                    console.log(nonAlpha);
                    return true;
                }
            }
            return false;
        }

        function hasProfileName(input, fullName) {
            const nameArray = fullName.split('.');

            if (input.indexOf(nameArray[0]) == -1 && input.indexOf(nameArray[1]) == -1) {
                // returns -1 when the name is not in the fname or lname
                return false;
            } else {
                console.log(fullName);
                return true;
            }

        }

        function isPasswordMatch() {
            let userPWInput = document.getElementById("signupPw1Input").value
            let userPWInput2 = document.getElementById("signupPw2Input").value
            let criteriaPasswordMatch = document.getElementById("confirm-password-same")

            if (userPWInput === userPWInput2) {
                criteriaPasswordMatch.classList.remove("password-desc-required");
            } else {
                criteriaPasswordMatch.classList.add("password-desc-required");
            }

        }

    </script>




</body>