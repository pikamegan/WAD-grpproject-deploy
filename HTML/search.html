<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="../CSS/style.css">
    <!-- vue -->
    <script src="https://unpkg.com/vue@next"></script>
    <!-- axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="../js/actions.js"></script>
    <!-- axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>Intern FYI</title>
</head>

<body>
    <div style="height: 70px; margin: auto; background-color: rgb(233, 233, 233); text-align: center;">
        NAVBAR PLACEHOLDER
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-3 col-md-4 shadow">
                <!-- sticky? -->
                <div class="container">
                    <div class="row my-2">
                        <div class="col" id="searchVue">
                            Filter by:
                            <img class="preventSelect" :src="currentFilterImg" style="width: 20px;"
                                @click="changeFilterImg()">
                            <img class="preventSelect" :src="currentImgSrc" style="width: 20px;"
                                @click="changeLetterSortImg()">
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div style="width: 500px; height: 100px; background-color: violet;">
                            what am i suppose to put here? and whats the functionality?
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div>Industry:</div>
                        <select name="Select Industry" id="industry">
                            <option value="" selected disabled hidden>Select Industry</option>
                            <option value="Manufacturing ">Manufacturing</option>
                            <option value="Finance">Finance</option>
                            <option value="Telecom">Telecom</option>
                            <option value="Law">Law</option>
                            <option value="Business">Business</option>
                            <option value="SocialScience">Social Science</option>
                            <option value="Healthcare">Healthcare</option>
                        </select>
                    </div>
                    <div class="row mb-2">
                        <div class="mb-2">Criteria:</div>
                        <ul style="list-style: none;" class="ms-4">
                            <li>
                                <label>
                                    <input type="checkbox">
                                    Good Pay
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    New Skills
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    Friendly
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    Food Price
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    Mentorship
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    Flat Hierarchy
                                </label>
                            </li>
                        </ul>
                    </div>
                    <div class="row mb-2">
                        <div class="mb-2">Location:</div>
                        <ul style="list-style: none;" class="ms-4">
                            <li>
                                <label>
                                    <input type="checkbox">
                                    Nearest to you
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    CBD
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    North
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    East
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox">
                                    West
                                </label>
                            </li>
                            <li>
                                <label class="map">
                                    <input type="checkbox" class="me-1">
                                    <input id="userZipCode" style="width: 100px; height: 25px; display: inline;"
                                        type="text" class="form-control" class="m-0 p-0" placeholder="Zip Code"
                                        maxlength="6" onclick="showYourLocation()">
                                    <button class="btn btn-primary m-0 p-0"
                                        style="width: 25px; height: 25px; display: inline;"><img
                                            src='../IMG/search-magnifiying-glass.svg' class="m-0 p-0"
                                            onclick="showYourLocation()"></button>
                                </label>
                            </li>
                        </ul>
                    </div>
                    <div class="row mb-2">

                        <div class = "mb-4" id="map" style="height: 400px; width: 400px;"></div>
                        <script>
                            var userLat = -34.397;
                            var userLong = 150.644;
                            function showYourLocation() {
                                let zipCode = document.getElementById("userZipCode").value
                                console.log(zipCode);
                                const url = `https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyCzFIE4IcUd35I_HeFWhbmEFZpNnx4SogA&components=postal_code:${zipCode}`;
                                axios
                                    .get(url)
                                    .then((response) => {
                                        // process response.data object
                                        // console.log(response.data);
                                        const myJSON = JSON.stringify(response.data);
                                        console.log(myJSON);
                                        userLong = response.data.results[0].geometry.location.lng
                                        userLat = response.data.results[0].geometry.location.lat
                                        // console.log(userLat);
                                        initMap()
                                    })
                                    .catch((error) => {
                                        // process error object
                                        console.log(error.message);
                                        //document.getElementById("displayString").innerText = "Something went wrong";
                                    });
                                    
                            }

                            var map;
                            console.log(userLat);
                            function initMap() {
                                map = new google.maps.Map(document.getElementById('map'), {
                                    center: { lat: userLat, lng: userLong },
                                    zoom: 15
                                });
                            }
                        
                        </script>
                        <script
                            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzFIE4IcUd35I_HeFWhbmEFZpNnx4SogA&callback=initMap"
                            async defer></script>

                    </div>

                
                </div>
            </div>
            <div class="col">

            </div>
        </div>
    </div>

    <!-- WIP -->
    <!-- cannot mount appSearch within searchVue -->

    <div id="appSearch">
        <company-row-list :companylist="allCompanies"></company-row-list>
    </div>

    <script src="../js/appSearch.js"></script>
    <!-- WIP -->

    <div style="height: 50px;">
    </div>

    <div style="height: 292px; margin: auto; background-color: rgb(233, 233, 233); text-align: center;">
        FOOTER PLACEHOLDER
    </div>
    <script>
        const appMap = Vue.createApp({
            data() {
                return {
                    // add properties here
                    currentImgSrc: "../img/AtoZ.svg",
                    currentFilterImg: "../img/filter.svg"

                }
            },
            methods: {
                changeLetterSortImg() {
                    if (this.currentImgSrc === "../img/AtoZ.svg") {
                        this.currentImgSrc = "../img/ZtoA.svg";
                    } else {
                        this.currentImgSrc = "../img/AtoZ.svg";
                    }
                },
                changeFilterImg() {
                    if (this.currentFilterImg === "../img/filter.svg") {
                        this.currentFilterImg = "../img/clearfilter.svg";
                    } else {
                        this.currentFilterImg = "../img/filter.svg";
                    }
                }
            }
        })
        const vm = appMap.mount('#searchVue');
    </script>

    <!-- JavaScript for CSS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
        crossorigin="anonymous"></script>




</body>

</html>